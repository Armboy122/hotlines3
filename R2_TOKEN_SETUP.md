# üîë ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á R2 API Token

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á API Token

### 1. ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà Cloudflare Dashboard
- ‡πÑ‡∏õ‡∏ó‡∏µ‡πà: https://dash.cloudflare.com/
- ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ account: arm.09686@gmail.com

### 2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà R2 Object Storage
- ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏°‡∏ô‡∏π "R2 Object Storage" ‡∏ó‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢
- ‡∏Ñ‡∏•‡∏¥‡∏Å "Manage R2 API tokens"

### 3. ‡∏™‡∏£‡πâ‡∏≤‡∏á API Token ‡πÉ‡∏´‡∏°‡πà
- ‡∏Ñ‡∏•‡∏¥‡∏Å "Create API token"
- ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ Token: "Hotline App Token"
- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Permissions:
  - **Object Read & Write** ‚úÖ
- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Resources:
  - **Include - Specific bucket** ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å `storagehotline` ‚úÖ
- ‡∏Ñ‡∏•‡∏¥‡∏Å "Create API token"

### 4. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
```
Access Key ID: [32 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£]
Secret Access Key: [43 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£]
```

### 5. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÑ‡∏ü‡∏•‡πå config
‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `src/lib/r2.ts`:

```typescript
const R2_CONFIG = {
  accountId: '8605ba5178c4d6a945aec62c38a12241',
  accessKeyId: '‡πÉ‡∏™‡πà Access Key ID ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ',
  secretAccessKey: '‡πÉ‡∏™‡πà Secret Access Key ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ',
  bucketName: 'storagehotline',
  publicUrl: 'https://pub-8605ba5178c4d6a945aec62c38a12241.r2.dev',
}
```

## üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå
```bash
node test-r2-upload.js
```

### 2. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ
```bash
npm run dev
```
‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏ó‡∏µ‡πà `/test-upload` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ

## üìã ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• R2 Bucket ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô

- **Account ID**: 8605ba5178c4d6a945aec62c38a12241
- **Bucket Name**: storagehotline  
- **Region**: APAC
- **Public URL**: https://pub-8605ba5178c4d6a945aec62c38a12241.r2.dev
- **Endpoint**: https://8605ba5178c4d6a945aec62c38a12241.r2.cloudflarestorage.com

## ‚úÖ ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞:
1. ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ error
2. ‡πÑ‡∏î‡πâ URL ‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏£‡∏π‡∏õ‡πÑ‡∏î‡πâ
3. ‡πÅ‡∏™‡∏î‡∏á Progress Bar ‡∏Ç‡∏ì‡∏∞‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î

## üö® ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

- **API Token ‡∏°‡∏µ‡∏≠‡∏≤‡∏¢‡∏∏** ‡∏ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
- **‡πÄ‡∏Å‡πá‡∏ö Secret ‡πÉ‡∏´‡πâ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢** ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô
- **‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ bucket storagehotline** ‡∏ï‡∏≤‡∏° permission ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ
- **Free Plan ‡∏°‡∏µ‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï** ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏¢‡∏≠‡∏∞‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î

## üîß Troubleshooting

### Error: Credential access key has length X, should be 32
- Access Key ID ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ 32 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏û‡∏≠‡∏î‡∏µ
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô

### Error: SignatureDoesNotMatch
- Secret Access Key ‡∏ú‡∏¥‡∏î
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

### Error: NoSuchBucket
- ‡∏ä‡∏∑‡πà‡∏≠ bucket ‡∏ú‡∏¥‡∏î ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ permission
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠ `storagehotline`
